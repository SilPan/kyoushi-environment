- name: Terragrunt bootstrap configuration
  type: file
  src: provisioning/terragrunt/bootstrap/terragrunt.hcl.j2
  dest: provisioning/terragrunt/bootstrap/terragrunt.hcl

- name: Terragrunt bootstrap configuration
  type: file
  src: provisioning/terragrunt/hosts/terragrunt.hcl.j2
  dest: provisioning/terragrunt/hosts/terragrunt.hcl

- name: Dnsteal configuration
  type: file
  src: provisioning/ansible/host_vars/attacker_0/dnsteal.yml.j2
  dest: provisioning/ansible/host_vars/attacker_0/dnsteal.yml

- name: Attacker configuration
  type: file
  src: provisioning/ansible/host_vars/attacker_0/attack.yml.j2
  dest: provisioning/ansible/host_vars/attacker_0/attack.yml

- name: Attack configuration
  type: file
  src: provisioning/ansible/host_vars/attacker_0/kyoushi.yml.j2
  dest: provisioning/ansible/host_vars/attacker_0/kyoushi.yml

- name: Employee list
  type: file
  src: provisioning/ansible/group_vars/all/employees.yml.j2
  dest: provisioning/ansible/group_vars/all/employees.yml

- name: Employee group configuration
  type: file
  src: provisioning/ansible/group_vars/employee/kyoushi.yml.j2
  dest: provisioning/ansible/group_vars/employee/kyoushi.yml

{% for employee in employees.internal.values() %}
- name: Internal employee
  type: dir
  src: model/templates/employees/
  dest: provisioning/ansible/host_vars/internal_employee_{{ employee.id }}
  contents:
    - name: Internal employee configuration
      type: file
      src: kyoushi.yml.j2
      dest: kyoushi.yml
      extra:
        employee: {{ employee }}
  delete: false
{% endfor %}
